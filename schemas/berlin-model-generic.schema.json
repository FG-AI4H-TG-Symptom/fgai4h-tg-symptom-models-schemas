{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/FG-AI4H-TG-Symptom/fgai4h-tg-symptom-models-schemas/master/schemas/berlin-model-generic.schema.json",
  "title": "Berlin Model Cases Schema",
  "description": "FGAI4H TG Symptom Cases Schema â€“ Berlin (created manually)",
  "$comment": "This schema is consumed by the Berlin model schema generator, verify changes in this schema are compatible with the generator and the generated schema.",
  "type": "object",
  "properties": {
    "caseSetName": {
      "type": "string",
      "description": "Name of the case set"
    },
    "cases": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/case"
      },
      "minItems": 1
    }
  },
  "required": [
    "caseSetName",
    "cases"
  ],
  "definitions": {
    "case": {
      "type": "object",
      "properties": {
        "caseId": {
          "type": "string",
          "description": "Case ID"
        },
        "metaData": {
          "type": "object",
          "properties": {
            "description": {
              "type": "string",
              "description": "Human readable case description"
            },
            "caseCreator": {
              "type": "string",
              "description": "Company and/or individual identifier of the case's creator"
            },
            "spreadsheetCaseId": {
              "type": "string",
              "description": "Identifier of this case in the originating spreadsheet"
            }
          },
          "required": [
            "description"
          ],
          "additionalProperties": false
        },
        "caseData": {
          "type": "object",
          "properties": {
            "profileInformation": {
              "type": "object",
              "description": "Patient profile information",
              "properties": {
                "age": {
                  "type": "number",
                  "description": "Age"
                },
                "biologicalSex": {
                  "type": "string",
                  "enum": [
                    "male",
                    "female"
                  ],
                  "description": "Biological sex"
                }
              },
              "required": [
                "age",
                "biologicalSex"
              ],
              "additionalProperties": false
            },
            "presentingComplaint": {
              "$ref": "#/definitions/clinicalFinding"
            },
            "otherFeatures": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/clinicalFinding"
              }
            }
          },
          "required": [
            "profileInformation",
            "presentingComplaint",
            "otherFeatures"
          ],
          "additionalProperties": false
        },
        "valuesToPredict": {
          "type": "object",
          "properties": {
            "expectedTriageLevel": {
              "type": "string",
              "enum": [
                "EC",
                "PC",
                "SC"
              ]
            },
            "expectedCondition": {
              "$ref": "#/definitions/condition"
            },
            "otherRelevantDifferentials": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/condition"
              }
            },
            "impossibleConditions": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/condition"
              }
            },
            "correctCondition": {
              "$ref": "#/definitions/condition"
            }
          },
          "required": [
            "expectedTriageLevel",
            "expectedCondition",
            "otherRelevantDifferentials",
            "impossibleConditions"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "caseId",
        "metaData",
        "caseData",
        "valuesToPredict"
      ],
      "additionalProperties": false
    },
    "clinicalFinding": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Clinical finding ID"
        },
        "sctid": {
          "type": "integer",
          "description": "Clinical finding SNOMED CT identifier (64-bit integer)"
        },
        "name": {
          "type": "string",
          "description": "Name of symptom"
        },
        "state": {
          "$ref": "#/definitions/clinicalFindingState"
        },
        "attributes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/attribute"
          }
        }
      },
      "required": [
        "id",
        "name",
        "state"
      ],
      "additionalProperties": false
    },
    "clinicalFindingState": {
      "type": "string",
      "enum": [
        "present",
        "absent",
        "unsure"
      ],
      "description": "Presence of the clinical finding"
    },
    "attribute": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Attribute ID"
        },
        "sctid": {
          "type": "integer",
          "description": "Attribute SNOMED CT identifier (64-bit integer)"
        },
        "customId": {
          "type": "integer",
          "description": "Custom identifier"
        },
        "name": {
          "type": "string",
          "description": "Attribute name"
        },
        "scope": {
          "type": "string",
          "description": "ID of clinical finding this attribute is scoped to"
        },
        "value": {
          "$ref": "#/definitions/value"
        }
      },
      "required": [
        "id",
        "name",
        "value"
      ],
      "additionalProperties": false
    },
    "value": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Value ID"
        },
        "sctid": {
          "type": "integer",
          "description": " Value SNOMED CT identifier (64-bit integer)"
        },
        "customId": {
          "type": "integer",
          "description": "Custom identifier"
        },
        "name": {
          "type": "string",
          "description": "Value name"
        }
      },
      "required": [
        "id",
        "name"
      ],
      "additionalProperties": false
    },
    "condition": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Condition ID"
        },
        "sctid": {
          "type": "integer",
          "description": "Condition SNOMED CT identifier (64-bit integer)"
        },
        "customId": {
          "type": "integer",
          "description": "Custom identifier"
        },
        "name": {
          "type": "string",
          "description": "Condition name"
        }
      },
      "required": [
        "id",
        "name"
      ],
      "additionalProperties": false
    }
  }
}
