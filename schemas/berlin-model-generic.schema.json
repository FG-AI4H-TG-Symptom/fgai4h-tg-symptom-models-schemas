{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/berlin-model-manual.schema.json",
  "title": "Berlin Model Cases Schema",
  "description": "FGAI4H TG Symptom Cases Schema â€“ Berlin (created manually)",
  "type": "array",
  "items": {
    "type": "object",
    "properties": {
      "caseData": {
        "$ref": "#/definitions/case"
      },
      "valuesToPredict": {
        "type": "object",
        "properties": {
          "expectedTriageLevel": {
            "type": "string",
            "enum": [
              "EC",
              "PC",
              "SC"
            ]
          },
          "expectedCondition": {
            "$ref": "#/definitions/condition"
          },
          "otherRelevantDifferentials": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/condition"
            }
          },
          "impossibleConditions": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/condition"
            }
          },
          "correctCondition": {
            "$ref": "#/definitions/condition"
          }
        },
        "required": [
          "expectedTriageLevel",
          "expectedCondition",
          "otherRelevantDifferentials",
          "impossibleConditions"
        ],
        "additionalProperties": false
      }
    },
    "required": [
      "caseData",
      "valuesToPredict"
    ],
    "additionalProperties": false
  },
  "definitions": {
    "case": {
      "type": "object",
      "properties": {
        "caseId": {
          "type": "string",
          "description": "Case ID"
        },
        "metaData": {
          "type": "object",
          "properties": {
            "description": {
              "type": "string",
              "description": "Human readable case description"
            },
            "caseCreator": {
              "type": "string",
              "description": "Company and/or individual identifier of the case's creator"
            },
            "spreadsheetCaseId": {
              "type": "string",
              "description": "Identifier of this case in the originating spreadsheet"
            }
          },
          "required": [
            "description"
          ],
          "additionalProperties": false
        },
        "profileInformation": {
          "type": "object",
          "description": "Patient profile information",
          "properties": {
            "age": {
              "type": "number",
              "description": "Age"
            },
            "biologicalSex": {
              "type": "string",
              "enum": [
                "male",
                "female"
              ],
              "description": "Biological sex"
            }
          },
          "required": [
            "age",
            "biologicalSex"
          ],
          "additionalProperties": false
        },
        "presentingComplaint": {
          "$ref": "#/definitions/symptom"
        },
        "otherFeatures": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/symptom"
          }
        }
      },
      "required": [
        "caseId",
        "profileInformation",
        "presentingComplaint",
        "otherFeatures"
      ],
      "additionalProperties": false
    },
    "symptom": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Symptom ID"
        },
        "sctid": {
          "type": "integer",
          "description": "SNOMED CT identifier"
        },
        "name": {
          "type": "string",
          "description": "Name of symptom"
        },
        "state": {
          "$ref": "#/definitions/symptomState"
        },
        "attributes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/attribute"
          }
        }
      },
      "required": [
        "id",
        "name",
        "state"
      ],
      "additionalProperties": false
    },
    "symptomState": {
      "type": "string",
      "enum": [
        "present",
        "absent",
        "unsure"
      ],
      "description": "Presence of the symptom"
    },
    "attribute": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Attribute ID"
        },
        "sctid": {
          "type": "integer",
          "description": "SNOMED CT identifier"
        },
        "customId": {
          "type": "integer",
          "description": "Custom identifier"
        },
        "name": {
          "type": "string",
          "description": "Attribute name"
        },
        "value": {
          "$ref": "#/definitions/value"
        }
      },
      "required": ["id", "name", "value"],
      "additionalProperties": false
    },
    "value": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Value ID"
        },
        "sctid": {
          "type": "integer",
          "description": "SNOMED CT identifier"
        },
        "customId": {
          "type": "integer",
          "description": "Custom identifier"
        },
        "name": {
          "type": "string",
          "description": "Value name"
        }
      },
      "required": ["id", "name"],
      "additionalProperties": false
    },
    "condition": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Condition ID"
        },
        "sctid": {
          "type": "integer",
          "description": "SNOMED CT identifier"
        },
        "customId": {
          "type": "integer",
          "description": "Custom identifier"
        },
        "name": {
          "type": "string",
          "description": "Condition name"
        }
      },
      "required": ["id", "name"],
      "additionalProperties": false
    }
  }
}
